<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>My Multimedia Diary</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
	<link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
      <div class="loading-content">
        <div class="loading-spinner"></div>
        <h2>Loading Your Multimedia Diary...</h2>
      </div>
    </div>

    <!-- Navigation -->
    <nav class="navbar">
      <div class="nav-container">
        <div class="nav-brand">
          <i class="fas fa-book-open"></i>
          <span>My Multimedia Diary</span>
        </div>
        <div class="nav-menu">
          <button class="nav-btn active" data-view="room">
            <i class="fas fa-home"></i>
            <span>Room</span>
          </button>
          <button class="nav-btn" data-view="overview">
            <i class="fas fa-list"></i>
            <span>Overview</span>
          </button>
          <button class="nav-btn" data-view="pending">
            <i class="fas fa-clock"></i>
            <span>Pending</span>
          </button>
          <button class="nav-btn" data-view="stats">
            <i class="fas fa-chart-bar"></i>
            <span>Stats</span>
          </button>
          <button class="nav-btn" data-view="add">
            <i class="fas fa-plus"></i>
            <span>Add</span>
          </button>
        </div>
        <div class="nav-actions">
          <button class="hamburger-btn" onclick="openSidenav()">
            <i class="fas fa-bars"></i>
          </button>
          <button class="theme-toggle" onclick="toggleTheme()">
            <i class="fas fa-sun"></i>
          </button>
        </div>
      </div>
    </nav>

    <!-- Sidenav and Overlay -->
    <div id="sidenav" class="sidenav">
      <a href="javascript:void(0)" class="sidenav-close" onclick="closeSidenav()">&times;</a>
      <button class="nav-btn active" data-view="room">
        <i class="fas fa-home"></i>
        <span>Room</span>
      </button>
      <button class="nav-btn" data-view="overview">
        <i class="fas fa-list"></i>
        <span>Overview</span>
      </button>
      <button class="nav-btn" data-view="pending">
        <i class="fas fa-clock"></i>
        <span>Pending</span>
      </button>
      <button class="nav-btn" data-view="stats">
        <i class="fas fa-chart-bar"></i>
        <span>Stats</span>
      </button>
      <button class="nav-btn" data-view="add">
        <i class="fas fa-plus"></i>
        <span>Add</span>
      </button>
    </div>
    <div id="overlay" class="overlay" onclick="closeSidenav()"></div>

    <!-- Main Content Container -->
    <main class="main-container">
      <!-- Room View -->
      <section id="roomView" class="view-section active">
        <div class="room-container">
          <div class="room-background"></div>

          <!-- Gaming Corner -->
          <div class="room-zone gaming-corner" data-type="videogame">
            <div class="zone-content">
              <div class="gaming-setup">
                <div class="modern-console"></div>
                <div class="controller"></div>
              </div>
              <div class="zone-label">
                <i class="fas fa-gamepad"></i>
                <span>Video Games</span>
                <div class="zone-count" data-type="videogame">0</div>
              </div>
            </div>
          </div>

          <!-- Cinema Area -->
          <div class="room-zone cinema-area" data-type="film">
            <div class="zone-content">
              <div class="modern-projector">
                <div class="projector-beam"></div>
              </div>
              <div class="projection-screen"></div>
              <div class="zone-label">
                <i class="fas fa-film"></i>
                <span>Films</span>
                <div class="zone-count" data-type="film">0</div>
              </div>
            </div>
          </div>

          <!-- TV Corner -->
          <div class="room-zone tv-corner" data-type="series">
            <div class="zone-content">
              <div class="modern-tv">
                <div class="smart-tv"></div>
                <div class="tv-base"></div>
              </div>
              <div class="zone-label">
                <i class="fas fa-tv"></i>
                <span>TV Series</span>
                <div class="zone-count" data-type="series">0</div>
              </div>
            </div>
          </div>

          <!-- Library -->
          <div class="room-zone library" data-type="book">
            <div class="zone-content">
              <div class="modern-bookshelf">
                <div class="shelf-unit">
                  <div class="shelf-board"></div>
                  <div class="book-collection">
                    <div class="book-display"></div>
                    <div class="book-display"></div>
                    <div class="book-display"></div>
                    <div class="book-display"></div>
                    <div class="book-display"></div>
                    <div class="book-display"></div>
                  </div>
                </div>
                <div class="shelf-unit">
                  <div class="shelf-board"></div>
                  <div class="book-collection">
                    <div class="book-display"></div>
                    <div class="book-display"></div>
                    <div class="book-display"></div>
                    <div class="book-display"></div>
                    <div class="book-display"></div>
                    <div class="book-display"></div>
                  </div>
                </div>
                <div class="bookshelf-light"></div>
              </div>
              <div class="zone-label">
                <i class="fas fa-book"></i>
                <span>Books</span>
                <div class="zone-count" data-type="book">0</div>
              </div>
            </div>
          </div>

          <!-- Research Desk -->
          <div class="room-zone research-desk" data-type="paper">
            <div class="zone-content">
              <div class="academic-workspace">
                <div class="modern-desk">
                  <div class="research-papers"></div>
                  <div class="academic-lamp"></div>
                  <div class="pen-holder"></div>
                </div>
              </div>
              <div class="zone-label">
                <i class="fas fa-scroll"></i>
                <span>Papers</span>
                <div class="zone-count" data-type="paper">0</div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Pending View -->
      <section id="pendingView" class="view-section">
        <div class="pending-header">
          <h2>Pending Content</h2>
          <div class="search-container">
            <input type="text" id="pendingSearch" placeholder="Search pending items..." class="search-input" />
            <i class="fas fa-search search-icon"></i>
          </div>
          <div class="pending-filters">
            <div class="filter-group">
              <button class="type-filter active" data-type="all">All Types</button>
              <button class="type-filter" data-type="videogame">Games</button>
              <button class="type-filter" data-type="film">Films</button>
              <button class="type-filter" data-type="series">Series</button>
              <button class="type-filter" data-type="book">Books</button>
              <button class="type-filter" data-type="paper">Papers</button>
            </div>
            <div class="filter-group">
              <select id="pendingSort" class="sort-select">
                <option value="created-desc">Recently Added</option>
                <option value="created-asc">Oldest Added</option>
                <option value="title-asc">Title (A-Z)</option>
                <option value="title-desc">Title (Z-A)</option>
                <option value="hyperating-desc">Hype Rating (High to Low)</option>
                <option value="hyperating-asc">Hype Rating (Low to High)</option>
              </select>
            </div>
          </div>
        </div>
        <div id="pendingContainer" class="timeline-container">
          <!-- Dynamic content will be inserted here -->
        </div>
      </section>

      <!-- Overview View (formerly Timeline) -->
      <section id="overviewView" class="view-section">
        <div class="timeline-header">
          <h2>Your Media Overview</h2>
          <div class="search-container">
            <input type="text" id="overviewSearch" placeholder="Search your collection..." class="search-input" />
            <i class="fas fa-search search-icon"></i>
          </div>
          <div class="timeline-filters">
            <div class="filter-group">
              <button class="filter-btn active" data-filter="all">All</button>
              <button class="filter-btn" data-filter="in-progress">In Progress</button>
              <button class="filter-btn" data-filter="completed">Completed</button>
            </div>
            <div class="filter-group">
              <button class="type-filter active" data-type="all">All Types</button>
              <button class="type-filter" data-type="videogame">Games</button>
              <button class="type-filter" data-type="film">Films</button>
              <button class="type-filter" data-type="series">Series</button>
              <button class="type-filter" data-type="book">Books</button>
              <button class="type-filter" data-type="paper">Papers</button>
            </div>
            <div class="filter-group">
              <select id="overviewSort" class="sort-select">
                <option value="created-desc">Recently Added</option>
                <option value="created-asc">Oldest Added</option>
                <option value="title-asc">Title (A-Z)</option>
                <option value="title-desc">Title (Z-A)</option>
                <option value="startdate-desc">Recently Started</option>
                <option value="startdate-asc">Earliest Started</option>
                <option value="finishdate-desc">Recently Finished</option>
                <option value="finishdate-asc">Earliest Finished</option>
                <option value="rating-desc">Rating (High to Low)</option>
                <option value="rating-asc">Rating (Low to High)</option>
              </select>
            </div>
          </div>
        </div>
        <div id="overviewContainer" class="timeline-container">
          <!-- Dynamic content will be inserted here -->
        </div>
      </section>

      <!-- Statistics View -->
      <section id="statsView" class="view-section">
        <div class="stats-header">
          <h2>Your Media Statistics</h2>
        </div>
        <div class="stats-container">
          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-icon">
                <i class="fas fa-list"></i>
              </div>
              <div class="stat-content">
                <div class="stat-number" id="totalEntries">0</div>
                <div class="stat-label">Total Entries</div>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon">
                <i class="fas fa-play"></i>
              </div>
              <div class="stat-content">
                <div class="stat-number" id="inProgressCount">0</div>
                <div class="stat-label">In Progress</div>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon">
                <i class="fas fa-check"></i>
              </div>
              <div class="stat-content">
                <div class="stat-number" id="completedCount">0</div>
                <div class="stat-label">Completed</div>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon">
                <i class="fas fa-star"></i>
              </div>
              <div class="stat-content">
                <div class="stat-number" id="averageRating">0</div>
                <div class="stat-label">Avg Rating</div>
              </div>
            </div>
          </div>

          <div class="charts-container">
            <div class="chart-card">
              <h3>Content Distribution</h3>
              <canvas id="typeChart"></canvas>
            </div>
            <div class="chart-card">
              <h3>Recent Activity</h3>
              <div id="recentActivity" class="activity-list">
                <!-- Dynamic content -->
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Add Entry View -->
      <section id="addView" class="view-section">
        <div class="add-header">
          <h2>Add New Entry</h2>
        </div>
        <div class="add-container">
          <div class="form-tabs">
            <button class="form-tab active" data-form="direct" onclick="switchFormTab('direct')"><i class="fas fa-plus"></i> Add Started Item</button>
            <button class="form-tab" data-form="pending" onclick="switchFormTab('pending')"><i class="fas fa-clock"></i> Add to Pending</button>
          </div>

          <form id="addEntryForm" class="modern-form">
            <div class="form-row">
              <div class="form-group">
                <label for="title">
                  <i class="fas fa-heading"></i>
                  Title *
                </label>
                <input type="text" id="title" required placeholder="Enter title..." />
              </div>
              <div class="form-group">
                <label for="type">
                  <i class="fas fa-tags"></i>
                  Type *
                </label>
                <select id="type" required>
                  <option value="">Select type...</option>
                  <option value="videogame">ðŸŽ® Video Game</option>
                  <option value="film">ðŸŽ¬ Film</option>
                  <option value="series">ðŸ“º TV Series</option>
                  <option value="book">ðŸ“š Book</option>
                  <option value="paper">ðŸ“„ Scientific Paper</option>
                </select>
              </div>
              <div class="form-group" id="authorSection" style="display: none;">
                <label for="author">
                  <i class="fas fa-user-edit"></i>
                  Author
                </label>
                <input type="text" id="author" placeholder="e.g., J.R.R. Tolkien" />
              </div>
            </div>

            <!-- CRITICAL FIX: Make author section full width (not in form-row) -->
            <div class="form-group" id="authorSectionFullWidth" style="display: none;">
              <label for="authorFullWidth">
                <i class="fas fa-user-edit"></i>
                Author
              </label>
              <input type="text" id="authorFullWidth" placeholder="e.g., J.R.R. Tolkien" />
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="startDate">
                  <i class="fas fa-play"></i>
                  Start Date
                </label>
                <!-- AÃ±ade este div wrapper -->
                <div class="date-input-wrapper">
                  <input type="date" id="startDate" />
                </div>
              </div>
              <div class="form-group">
                <label for="finishDate">
                  <i class="fas fa-flag-checkered"></i>
                  Finish Date
                </label>
                <!-- AÃ±ade este div wrapper -->
                <div class="date-input-wrapper">
                  <input type="date" id="finishDate" />
                </div>
              </div>
            </div>

            <div class="form-group" id="finishedSection" style="display: none;">
              <label class="modern-checkbox">
                <input type="checkbox" id="isFinished" />
                <span class="checkmark"></span>
                <div class="modern-checkbox-label">
                  <span><i class="fas fa-check-circle" style="color: var(--accent-success); margin-right: 4px;"></i>Mark as finished</span>
                  <small>Check this if you've completed this item but don't remember when you started/finished it</small>
                </div>
              </label>
            </div>

            <div class="form-group" id="ratingSection">
              <label for="rating">
                <i class="fas fa-star"></i>
                Rating (0 for N/A)
                <!-- Changed label -->
              </label>
              <div class="rating-container">
                <input type="range" id="rating" min="0" max="10" value="5" />
                <!-- Changed min="0" -->
                <span id="ratingValue" class="rating-value">5</span>
              </div>
              <div class="rating-stars" id="ratingStars">
                <!-- Dynamic stars -->
              </div>
            </div>

            <div class="form-group">
              <label for="notes">
                <i class="fas fa-sticky-note"></i>
                Notes
              </label>
              <textarea id="notes" rows="4" placeholder="Your thoughts, review, or notes..."></textarea>
            </div>

            <div class="form-actions">
              <button type="button" class="btn-secondary" onclick="resetForm()">
                <i class="fas fa-undo"></i>
                Reset
              </button>
              <button type="submit" class="btn-primary">
                <i class="fas fa-plus"></i>
                Add Entry
              </button>
            </div>
          </form>

          <form id="addPendingForm" class="pending-form" style="display: none;">
            <div class="form-row">
              <div class="form-group">
                <label for="pendingTitle">
                  <i class="fas fa-heading"></i>
                  Title *
                </label>
                <input type="text" id="pendingTitle" required placeholder="Enter title..." />
              </div>
              <div class="form-group">
                <label for="pendingType">
                  <i class="fas fa-tags"></i>
                  Type *
                </label>
                <select id="pendingType" required>
                  <option value="">Select type...</option>
                  <option value="videogame">ðŸŽ® Video Game</option>
                  <option value="film">ðŸŽ¬ Film</option>
                  <option value="series">ðŸ“º TV Series</option>
                  <option value="book">ðŸ“š Book</option>
                  <option value="paper">ðŸ“„ Scientific Paper</option>
                </select>
              </div>
            </div>

            <!-- CRITICAL FIX: Add author field for books - initially hidden -->
            <div class="form-group" id="pendingAuthorSection" style="display: none;">
              <label for="pendingAuthor">
                <i class="fas fa-user-edit"></i>
                Author
              </label>
              <input type="text" id="pendingAuthor" placeholder="e.g., J.R.R. Tolkien" />
              <small>Enter the author name for books</small>
            </div>

            <!-- CRITICAL FIX: Make tags section full width (not in form-row) -->
            <div class="form-group">
              <label for="pendingTags">
                <i class="fas fa-tag"></i>
                Tags
              </label>
              <input type="text" id="pendingTags" placeholder="sci-fi, thriller, recommended (comma separated)" />
              <small>Use commas to separate multiple tags</small>
            </div>

            <!-- CRITICAL FIX: Move hype rating to its own form-group (no form-row) to match 'Add started item' -->
            <div class="form-group">
              <label for="pendingHype">
                <i class="fas fa-fire"></i>
                Hype Rating (1-10)
              </label>
              <div class="rating-container">
                <input type="range" id="pendingHype" min="1" max="10" value="5" />
                <div style="
                  display: flex;
                  align-items: center;
                  gap: 4px;
                  position: relative;
                " id="pendingHypeFire">
                  <!-- Fire emojis positioned properly -->
                  <span style="
                    position: relative;
                    display: flex;
                    align-items: center;
                    gap: 2px;
                    margin-right: 4px;
                  ">
                    <span style="font-size: 14px; animation: fireFlicker 1.5s ease-in-out infinite alternate;">ðŸ”¥</span>
                  </span>
                  
                  <!-- Orange rating box with contained shine effect -->
                  <span style="
                    background: linear-gradient(135deg, #ff6200, #ff9500, #ff6200);
                    background-size: 200% 200%;
                    color: white;
                    padding: 4px 8px;
                    border-radius: 6px;
                    font-weight: 700;
                    font-size: 12px;
                    min-width: 40px;
                    text-align: center;
                    border: 2px solid rgba(255, 94, 0, 0.3);
                    box-shadow: 0 0 15px rgba(255, 94, 0, 0.4);
                    animation: hypeGlow 3s ease-in-out infinite alternate;
                    position: relative;
                    overflow: hidden;
                  " id="pendingHypeValue">5/10
                    <!-- Contained shine effect -->
                    <span style="
                      position: absolute;
                      top: 0;
                      left: -100%;
                      width: 100%;
                      height: 100%;
                      background: linear-gradient(45deg, transparent 30%, rgba(255, 255, 255, 0.4) 50%, transparent 70%);
                      animation: hypeShine 4s ease-in-out infinite;
                    "></span>
                  </span>
                </div>
              </div>
            </div>

            <div class="form-group">
              <label for="pendingNotes">
                <i class="fas fa-sticky-note"></i>
                Notes
              </label>
              <textarea id="pendingNotes" rows="3" placeholder="Why do you want to check this out?"></textarea>
            </div>

            <div class="form-actions">
              <button type="button" class="btn-secondary" onclick="resetPendingForm()">
                <i class="fas fa-undo"></i>
                Reset
              </button>
              <button type="submit" class="btn-primary">
                <i class="fas fa-clock"></i>
                Add to Pending
              </button>
            </div>
          </form>

          <div id="formFeedback" class="form-feedback"></div>
        </div>
      </section>
    </main>

    <!-- Entry Detail Modal -->
    <div id="entryModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 class="view-mode" id="modalTitle">Entry Details</h3>
          <h3 class="edit-mode">Edit Entry</h3>
          <button class="modal-close" onclick="closeModal()">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <form id="modalEditForm" onsubmit="saveEntryChanges(event)">
          <div class="modal-body" id="modalBody">
            <!-- Dynamic content will be generated by JS -->
          </div>
          <div class="modal-footer">
            <!-- View Mode Buttons -->
            <button type="button" class="btn-secondary view-mode" onclick="closeModal()">Close</button>
            <button type="button" class="btn-primary view-mode" onclick="toggleEntryEdit(true)"><i class="fas fa-edit"></i> Edit</button>
            <button type="button" class="btn-danger view-mode" onclick="deleteCurrentEntry()"><i class="fas fa-trash"></i> Delete</button>
            <!-- Edit Mode Buttons -->
            <button type="button" class="btn-secondary edit-mode" onclick="toggleEntryEdit(false)">Cancel</button>
            <button type="submit" class="btn-primary edit-mode"><i class="fas fa-save"></i> Save Changes</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
	<script src="js/config.js"></script>
	<script src="js/utils.js"></script>
	<script src="js/api.js"></script>
	<script src="js/main.js"></script>
  </body>
</html>
